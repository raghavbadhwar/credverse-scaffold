(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[93],{2306:function(t,e,r){"use strict";r.r(e),e.default={}},984:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});let a=r(3587);class n{BigNum;constructor(){this.BigNum=(t,e)=>new(a.BigNumber.clone({DECIMAL_PLACES:e}))(t)}winstonToAr(t,{formatted:e=!1,decimals:r=12,trim:a=!0}={}){let n=this.stringToBigNum(t,r).shiftedBy(-12);return e?n.toFormat(r):n.toFixed(r)}arToWinston(t,{formatted:e=!1}={}){let r=this.stringToBigNum(t).shiftedBy(12);return e?r.toFormat():r.toFixed(0)}compare(t,e){let r=this.stringToBigNum(t),a=this.stringToBigNum(e);return r.comparedTo(a)}isEqual(t,e){return 0===this.compare(t,e)}isLessThan(t,e){let r=this.stringToBigNum(t),a=this.stringToBigNum(e);return r.isLessThan(a)}isGreaterThan(t,e){let r=this.stringToBigNum(t),a=this.stringToBigNum(e);return r.isGreaterThan(a)}add(t,e){let r=this.stringToBigNum(t);return this.stringToBigNum(e),r.plus(e).toFixed(0)}sub(t,e){let r=this.stringToBigNum(t);return this.stringToBigNum(e),r.minus(e).toFixed(0)}stringToBigNum(t,e=12){return this.BigNum(t,e)}}e.default=n},7144:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});let a=r(3173);r(2306);class n{api;network;static HASH_ENDPOINT="block/hash/";static HEIGHT_ENDPOINT="block/height/";constructor(t,e){this.api=t,this.network=e}async get(t){let e=await this.api.get(`${n.HASH_ENDPOINT}${t}`);if(200===e.status)return e.data;if(404===e.status)throw new a.default("BLOCK_NOT_FOUND");throw Error(`Error while loading block data: ${e}`)}async getByHeight(t){let e=await this.api.get(`${n.HEIGHT_ENDPOINT}${t}`);if(200===e.status)return e.data;if(404===e.status)throw new a.default("BLOCK_NOT_FOUND");throw Error(`Error while loading block data: ${e}`)}async getCurrent(){let{current:t}=await this.network.getInfo();return await this.get(t)}}e.default=n},7892:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});let a=r(3173),n=r(6980);class i{api;constructor(t){this.api=t}async getTransactionOffset(t){let e=await this.api.get(`tx/${t}/offset`);if(200===e.status)return e.data;throw Error(`Unable to get transaction offset: ${(0,a.getError)(e)}`)}async getChunk(t){let e=await this.api.get(`chunk/${t}`);if(200===e.status)return e.data;throw Error(`Unable to get chunk: ${(0,a.getError)(e)}`)}async getChunkData(t){let e=await this.getChunk(t);return n.b64UrlToBuffer(e.chunk)}firstChunkOffset(t){return parseInt(t.offset)-parseInt(t.size)+1}async downloadChunkedData(t){let e=await this.getTransactionOffset(t),r=parseInt(e.size),a=parseInt(e.offset)-r+1,n=new Uint8Array(r),i=0;for(;i<r;){let t;this.api.config.logging&&console.log(`[chunk] ${i}/${r}`);try{t=await this.getChunkData(a+i)}catch(t){console.error(`[chunk] Failed to fetch chunk at offset ${a+i}`),console.error("[chunk] This could indicate that the chunk wasn't uploaded or hasn't yet seeded properly to a particular gateway/node")}if(t)n.set(t,i),i+=t.length;else throw Error(`Couldn't complete data download at ${i}/${r}`)}return n}}e.default=i},1924:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});let a=r(984),n=r(8116),i=r(1500),s=r(5035),o=r(9978),u=r(3499),l=r(7651),c=r(6980),h=r(3406),f=r(7892),d=r(7144);class g{api;wallets;transactions;network;blocks;ar;silo;chunks;static init;static crypto=new i.default;static utils=c;constructor(t){this.api=new n.default(t),this.wallets=new u.default(this.api,g.crypto),this.chunks=new f.default(this.api),this.transactions=new o.default(this.api,g.crypto,this.chunks),this.silo=new h.default(this.api,this.crypto,this.transactions),this.network=new s.default(this.api),this.blocks=new d.default(this.api,this.network),this.ar=new a.default}get crypto(){return g.crypto}get utils(){return g.utils}getConfig(){return{api:this.api.getConfig(),crypto:null}}async createTransaction(t,e){let r={};if(Object.assign(r,t),!t.data&&!(t.target&&t.quantity))throw Error("A new Arweave transaction must have a 'data' value, or 'target' and 'quantity' values.");if(void 0==t.owner&&e&&"use_wallet"!==e&&(r.owner=e.n),void 0==t.last_tx&&(r.last_tx=await this.transactions.getTransactionAnchor()),"string"==typeof t.data&&(t.data=c.stringToBuffer(t.data)),t.data instanceof ArrayBuffer&&(t.data=new Uint8Array(t.data)),t.data&&!(t.data instanceof Uint8Array))throw Error("Expected data to be a string, Uint8Array or ArrayBuffer");if(void 0==t.reward){let e=t.data?t.data.byteLength:0;r.reward=await this.transactions.getPrice(e,r.target)}r.data_root="",r.data_size=t.data?t.data.byteLength.toString():"0",r.data=t.data||new Uint8Array(0);let a=new l.default(r);return await a.getSignatureData(),a}async createSiloTransaction(t,e,r){let a={};if(Object.assign(a,t),!t.data)throw Error("Silo transactions must have a 'data' value");if(!r)throw Error("No Silo URI specified.");if(t.target||t.quantity)throw Error("Silo transactions can only be used for storing data, sending AR to other wallets isn't supported.");if(void 0==t.owner){if(!e||!e.n)throw Error("A new Arweave transaction must either have an 'owner' attribute, or you must provide the jwk parameter.");a.owner=e.n}void 0==t.last_tx&&(a.last_tx=await this.transactions.getTransactionAnchor());let n=await this.silo.parseUri(r);if("string"==typeof t.data){let e=await this.crypto.encrypt(c.stringToBuffer(t.data),n.getEncryptionKey());a.reward=await this.transactions.getPrice(e.byteLength),a.data=c.bufferTob64Url(e)}if(t.data instanceof Uint8Array){let e=await this.crypto.encrypt(t.data,n.getEncryptionKey());a.reward=await this.transactions.getPrice(e.byteLength),a.data=c.bufferTob64Url(e)}let i=new l.default(a);return i.addTag("Silo-Name",n.getAccessKey()),i.addTag("Silo-Version","0.1.0"),i}arql(t){return this.api.post("/arql",t).then(t=>t.data||[])}}e.default=g},7093:function(t,e,r){"use strict";var a=this&&this.__createBinding||(Object.create?function(t,e,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(e,r);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,a,n)}:function(t,e,r,a){void 0===a&&(a=r),t[a]=e[r]}),n=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||a(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0});let i=r(1924),s=r(6834);i.default.init=function(t={}){if("object"!=typeof location||!location.protocol||!location.hostname)return new i.default({...t,host:"arweave.net",port:443,protocol:"https"});let e=location.protocol.replace(":",""),r=location.hostname,a=location.port?parseInt(location.port):"https"==e?443:80,n=(0,s.getDefaultConfig)(e,r),o=t.protocol||n.protocol,u=t.host||n.host,l=t.port||n.port||a;return new i.default({...t,host:u,protocol:o,port:l})},"object"==typeof globalThis?globalThis.Arweave=i.default:"object"==typeof self&&(self.Arweave=i.default),n(r(1924),e),e.default=i.default},8116:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class r{METHOD_GET="GET";METHOD_POST="POST";config;constructor(t){this.applyConfig(t)}applyConfig(t){this.config=this.mergeDefaults(t)}getConfig(){return this.config}mergeDefaults(t){let e=t.protocol||"http",r=t.port||("https"===e?443:80);return{host:t.host||"127.0.0.1",protocol:e,port:r,timeout:t.timeout||2e4,logging:t.logging||!1,logger:t.logger||console.log,network:t.network}}async get(t,e){return await this.request(t,{...e,method:this.METHOD_GET})}async post(t,e,r){let a=new Headers(r?.headers||{});return a.get("content-type")?.includes("application/json")||a.append("content-type","application/json"),a.append("accept","application/json, text/plain, */*"),await this.request(t,{...r,method:this.METHOD_POST,body:"string"!=typeof e?JSON.stringify(e):e,headers:a})}async request(t,e){let r=new Headers(e?.headers||{}),n=`${this.config.protocol}://${this.config.host}:${this.config.port}`,i=e?.responseType;delete e?.responseType,t.startsWith("/")&&(t=t.slice(1)),this.config.network&&r.append("x-network",this.config.network),this.config.logging&&this.config.logger(`Requesting: ${n}/${t}`);let s=await fetch(`${n}/${t}`,{...e||{},headers:r});this.config.logging&&this.config.logger(`Response:   ${s.url} - ${s.status}`);let o=s.headers.get("content-type"),u=o?.match(/charset=([^()<>@,;:\"/[\]?.=\s]*)/i)?.[1],l=async()=>{if(u)try{s.data=new TextDecoder(u).decode(await s.arrayBuffer())}catch(t){s.data=await s.text()}else s.data=await s.text()};if("arraybuffer"===i)s.data=await s.arrayBuffer();else if("text"===i)await l();else if("webstream"===i)s.data=a(s.body);else try{let t=await s.clone().json();"object"!=typeof t?await l():s.data=await s.json(),t=null}catch{await l()}return s}}e.default=r;let a=t=>(void 0===t[Symbol.asyncIterator]&&(t[Symbol.asyncIterator]=n(t)),t),n=function(t){return async function*(){let e=t.getReader();try{for(;;){let{done:t,value:r}=await e.read();if(t)return;yield r}}finally{e.releaseLock()}}}},1500:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});let a=r(6980);class n{keyLength=4096;publicExponent=65537;hashAlgorithm="sha256";driver;constructor(){if(!this.detectWebCrypto())throw Error("SubtleCrypto not available!");this.driver=crypto.subtle}async generateJWK(){let t=await this.driver.generateKey({name:"RSA-PSS",modulusLength:4096,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign"]),e=await this.driver.exportKey("jwk",t.privateKey);return{kty:e.kty,e:e.e,n:e.n,d:e.d,p:e.p,q:e.q,dp:e.dp,dq:e.dq,qi:e.qi}}async sign(t,e,{saltLength:r}={}){return new Uint8Array(await this.driver.sign({name:"RSA-PSS",saltLength:r??32},await this.jwkToCryptoKey(t),e))}async hash(t,e="SHA-256"){return new Uint8Array(await this.driver.digest(e,t))}async verify(t,e,r){let a=await this.jwkToPublicCryptoKey({kty:"RSA",e:"AQAB",n:t}),n=await this.driver.digest("SHA-256",e),i=await this.driver.verify({name:"RSA-PSS",saltLength:0},a,r,e),s=await this.driver.verify({name:"RSA-PSS",saltLength:32},a,r,e),o=Math.ceil((a.algorithm.modulusLength-1)/8)-n.byteLength-2,u=await this.driver.verify({name:"RSA-PSS",saltLength:o},a,r,e),l=i||s||u;if(!l){let t={algorithm:a.algorithm.name,modulusLength:a.algorithm.modulusLength,keyUsages:a.usages,saltLengthsAttempted:`0, 32, ${o}`};console.warn("Transaction Verification Failed! \n",`Details: ${JSON.stringify(t,null,2)} 
`,"N.B. ArweaveJS is only guaranteed to verify txs created using ArweaveJS.")}return l}async jwkToCryptoKey(t){return this.driver.importKey("jwk",t,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["sign"])}async jwkToPublicCryptoKey(t){return this.driver.importKey("jwk",t,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["verify"])}detectWebCrypto(){if("undefined"==typeof crypto)return!1;let t=crypto?.subtle;return void 0!==t&&["generateKey","importKey","exportKey","digest","sign"].every(e=>"function"==typeof t[e])}async encrypt(t,e,r){let n=await this.driver.importKey("raw","string"==typeof e?a.stringToBuffer(e):e,{name:"PBKDF2",length:32},!1,["deriveKey"]),i=await this.driver.deriveKey({name:"PBKDF2",salt:r?a.stringToBuffer(r):a.stringToBuffer("salt"),iterations:1e5,hash:"SHA-256"},n,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),s=new Uint8Array(16);crypto.getRandomValues(s);let o=await this.driver.encrypt({name:"AES-CBC",iv:s},i,t);return a.concatBuffers([s,o])}async decrypt(t,e,r){let n=await this.driver.importKey("raw","string"==typeof e?a.stringToBuffer(e):e,{name:"PBKDF2",length:32},!1,["deriveKey"]),i=await this.driver.deriveKey({name:"PBKDF2",salt:r?a.stringToBuffer(r):a.stringToBuffer("salt"),iterations:1e5,hash:"SHA-256"},n,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),s=t.slice(0,16),o=await this.driver.decrypt({name:"AES-CBC",iv:s},i,t.slice(16));return a.concatBuffers([o])}}e.default=n},6496:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;let a=r(1924);async function n(t){if(Array.isArray(t)){let e=a.default.utils.concatBuffers([a.default.utils.stringToBuffer("list"),a.default.utils.stringToBuffer(t.length.toString())]);return await i(t,await a.default.crypto.hash(e,"SHA-384"))}let e=a.default.utils.concatBuffers([a.default.utils.stringToBuffer("blob"),a.default.utils.stringToBuffer(t.byteLength.toString())]),r=a.default.utils.concatBuffers([await a.default.crypto.hash(e,"SHA-384"),await a.default.crypto.hash(t,"SHA-384")]);return await a.default.crypto.hash(r,"SHA-384")}async function i(t,e){if(t.length<1)return e;let r=a.default.utils.concatBuffers([e,await n(t[0])]),s=await a.default.crypto.hash(r,"SHA-384");return await i(t.slice(1),s)}},3173:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getError=function(t){let e=t.data;if("string"==typeof t.data)try{e=JSON.parse(t.data)}catch(t){}if(t.data instanceof ArrayBuffer||t.data instanceof Uint8Array)try{e=JSON.parse(e.toString())}catch(t){}return e?e.error||e:t.statusText||"unknown"};class r extends Error{type;response;constructor(t,e={}){e.message?super(e.message):super(),this.type=t,this.response=e.response}getType(){return this.type}}e.default=r},2951:function(t,e,r){"use strict";var a=r(2957).lW;Object.defineProperty(e,"__esModule",{value:!0}),e.arrayCompare=e.MIN_CHUNK_SIZE=e.MAX_CHUNK_SIZE=void 0,e.chunkData=s,e.generateLeaves=o,e.computeRootHash=u,e.generateTree=l,e.generateTransactionChunks=c,e.buildLayers=h,e.generateProofs=f,e.arrayFlatten=d,e.intToBuffer=w,e.bufferToInt=y,e.validatePath=m,e.debug=b;let n=r(1924),i=r(6980);async function s(t){let r=[],a=t,i=0;for(;a.byteLength>=e.MAX_CHUNK_SIZE;){let t=e.MAX_CHUNK_SIZE,s=a.byteLength-e.MAX_CHUNK_SIZE;s>0&&s<e.MIN_CHUNK_SIZE&&(t=Math.ceil(a.byteLength/2));let o=a.slice(0,t),u=await n.default.crypto.hash(o);i+=o.byteLength,r.push({dataHash:u,minByteRange:i-o.byteLength,maxByteRange:i}),a=a.slice(t)}return r.push({dataHash:await n.default.crypto.hash(a),minByteRange:i,maxByteRange:i+a.byteLength}),r}async function o(t){return Promise.all(t.map(async({dataHash:t,minByteRange:e,maxByteRange:r})=>({type:"leaf",id:await p(await Promise.all([p(t),p(w(r))])),dataHash:t,minByteRange:e,maxByteRange:r})))}async function u(t){return(await l(t)).id}async function l(t){return await h(await o(await s(t)))}async function c(t){let e=await s(t),r=await o(e),a=await h(r),n=await f(a),i=e.slice(-1)[0];return i.maxByteRange-i.minByteRange==0&&(e.splice(e.length-1,1),n.splice(n.length-1,1)),{data_root:a.id,chunks:e,proofs:n}}async function h(t,e=0){if(t.length<2)return t[0];let r=[];for(let e=0;e<t.length;e+=2)r.push(await g(t[e],t[e+1]));return h(r,e+1)}function f(t){let e=function t(e,r=new Uint8Array,a=0){if("leaf"==e.type)return{offset:e.maxByteRange-1,proof:(0,i.concatBuffers)([r,e.dataHash,w(e.maxByteRange)])};if("branch"==e.type){let n=(0,i.concatBuffers)([r,e.leftChild.id,e.rightChild.id,w(e.byteRange)]);return[t(e.leftChild,n,a+1),t(e.rightChild,n,a+1)]}throw Error("Unexpected node type")}(t);return Array.isArray(e)?d(e):[e]}function d(t){let e=[];return t.forEach(t=>{Array.isArray(t)?e.push(...d(t)):e.push(t)}),e}async function g(t,e){return e?{type:"branch",id:await p([await p(t.id),await p(e.id),await p(w(t.maxByteRange))]),byteRange:t.maxByteRange,maxByteRange:e.maxByteRange,leftChild:t,rightChild:e}:t}async function p(t){return Array.isArray(t)&&(t=n.default.utils.concatBuffers(t)),new Uint8Array(await n.default.crypto.hash(t))}function w(t){let e=new Uint8Array(32);for(var r=e.length-1;r>=0;r--){var a=t%256;e[r]=a,t=(t-a)/256}return e}function y(t){let e=0;for(var r=0;r<t.length;r++)e*=256,e+=t[r];return e}async function m(t,r,a,n,i){if(n<=0)return!1;if(r>=n)return m(t,0,n-1,n,i);if(r<0)return m(t,0,0,n,i);if(64==i.length){let r=i.slice(0,32),s=i.slice(r.length,r.length+32),o=await p([await p(r),await p(s)]);return!!(0,e.arrayCompare)(t,o)&&{offset:n-1,leftBound:a,rightBound:n,chunkSize:n-a}}let s=i.slice(0,32),o=i.slice(s.length,s.length+32),u=i.slice(s.length+o.length,s.length+o.length+32),l=y(u),c=i.slice(s.length+o.length+u.length),h=await p([await p(s),await p(o),await p(u)]);return!!(0,e.arrayCompare)(t,h)&&(r<l?await m(s,r,a,Math.min(n,l),c):await m(o,r,Math.max(a,l),n,c))}async function b(t,e=""){if(t.byteLength<1)return e;let r=t.slice(0,32),n=t.slice(r.length,r.length+32),i=t.slice(r.length+n.length,r.length+n.length+32),s=y(i),o=t.slice(r.length+n.length+i.length),u=await p([await p(r),await p(n),await p(i)]);return b(o,`${e}
${JSON.stringify(a.from(r))},${JSON.stringify(a.from(n))},${s} => ${JSON.stringify(u)}`)}e.MAX_CHUNK_SIZE=262144,e.MIN_CHUNK_SIZE=32768,e.arrayCompare=(t,e)=>t.every((t,r)=>e[r]===t)},8924:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TransactionUploader=void 0;let a=r(7651),n=r(6980),i=r(3173),s=r(2951),o=["invalid_json","chunk_too_big","data_path_too_big","offset_too_big","data_size_too_big","chunk_proof_ratio_not_attractive","invalid_proof"];class u{api;chunkIndex=0;txPosted=!1;transaction;lastRequestTimeEnd=0;totalErrors=0;data;lastResponseStatus=0;lastResponseError="";get isComplete(){return this.txPosted&&this.chunkIndex===this.transaction.chunks.chunks.length}get totalChunks(){return this.transaction.chunks.chunks.length}get uploadedChunks(){return this.chunkIndex}get pctComplete(){return Math.trunc(this.uploadedChunks/this.totalChunks*100)}constructor(t,e){if(this.api=t,!e.id)throw Error("Transaction is not signed");if(!e.chunks)throw Error("Transaction chunks not prepared");this.data=e.data,this.transaction=new a.default(Object.assign({},e,{data:new Uint8Array(0)}))}async uploadChunk(t){if(this.isComplete)throw Error("Upload is already complete");if(""!==this.lastResponseError?this.totalErrors++:this.totalErrors=0,100===this.totalErrors)throw Error(`Unable to complete upload: ${this.lastResponseStatus}: ${this.lastResponseError}`);let e=""===this.lastResponseError?0:Math.max(this.lastRequestTimeEnd+4e4-Date.now(),4e4);if(e>0&&(e-=e*Math.random()*.3,await new Promise(t=>setTimeout(t,e))),this.lastResponseError="",!this.txPosted){await this.postTransaction();return}t&&(this.chunkIndex=t);let r=this.transaction.getChunk(t||this.chunkIndex,this.data);if(!await (0,s.validatePath)(this.transaction.chunks.data_root,parseInt(r.offset),0,parseInt(r.data_size),n.b64UrlToBuffer(r.data_path)))throw Error(`Unable to validate chunk ${this.chunkIndex}`);let a=await this.api.post("chunk",this.transaction.getChunk(this.chunkIndex,this.data)).catch(t=>(console.error(t.message),{status:-1,data:{error:t.message}}));if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=a.status,200==this.lastResponseStatus)this.chunkIndex++;else if(this.lastResponseError=(0,i.getError)(a),o.includes(this.lastResponseError))throw Error(`Fatal error uploading chunk ${this.chunkIndex}: ${this.lastResponseError}`)}static async fromSerialized(t,e,r){if(!e||"number"!=typeof e.chunkIndex||"object"!=typeof e.transaction)throw Error("Serialized object does not match expected format.");var n=new a.default(e.transaction);n.chunks||await n.prepareChunks(r);let i=new u(t,n);if(i.chunkIndex=e.chunkIndex,i.lastRequestTimeEnd=e.lastRequestTimeEnd,i.lastResponseError=e.lastResponseError,i.lastResponseStatus=e.lastResponseStatus,i.txPosted=e.txPosted,i.data=r,i.transaction.data_root!==e.transaction.data_root)throw Error("Data mismatch: Uploader doesn't match provided data.");return i}static async fromTransactionId(t,e){let r=await t.get(`tx/${e}`);if(200!==r.status)throw Error(`Tx ${e} not found: ${r.status}`);let a=r.data;return a.data=new Uint8Array(0),{txPosted:!0,chunkIndex:0,lastResponseError:"",lastRequestTimeEnd:0,lastResponseStatus:0,transaction:a}}toJSON(){return{chunkIndex:this.chunkIndex,transaction:this.transaction,lastRequestTimeEnd:this.lastRequestTimeEnd,lastResponseStatus:this.lastResponseStatus,lastResponseError:this.lastResponseError,txPosted:this.txPosted}}async postTransaction(){if(this.totalChunks<=1){this.transaction.data=this.data;let t=await this.api.post("tx",this.transaction).catch(t=>(console.error(t),{status:-1,data:{error:t.message}}));if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=t.status,this.transaction.data=new Uint8Array(0),t.status>=200&&t.status<300){this.txPosted=!0,this.chunkIndex=1;return}throw this.lastResponseError=(0,i.getError)(t),Error(`Unable to upload transaction: ${t.status}, ${this.lastResponseError}`)}let t=await this.api.post("tx",this.transaction);if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=t.status,!(t.status>=200&&t.status<300))throw this.lastResponseError=(0,i.getError)(t),Error(`Unable to upload transaction: ${t.status}, ${this.lastResponseError}`);this.txPosted=!0}}e.TransactionUploader=u},7651:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tag=void 0;let a=r(6980),n=r(6496),i=r(2951);class s{get(t,e){if(!Object.getOwnPropertyNames(this).includes(t))throw Error(`Field "${t}" is not a property of the Arweave Transaction class.`);if(this[t]instanceof Uint8Array)return e&&e.decode&&e.string?a.bufferToString(this[t]):e&&e.decode&&!e.string?this[t]:a.bufferTob64Url(this[t]);if(this[t]instanceof Array){if(e?.decode!==void 0||e?.string!==void 0)throw"tags"===t&&console.warn("Did you mean to use 'transaction[\"tags\"]' ?"),Error("Cannot decode or stringify an array.");return this[t]}return e&&!0==e.decode?e&&e.string?a.b64UrlToString(this[t]):a.b64UrlToBuffer(this[t]):this[t]}}class o extends s{name;value;constructor(t,e,r=!1){super(),this.name=t,this.value=e}}e.Tag=o;class u extends s{format=2;id="";last_tx="";owner="";tags=[];target="";quantity="0";data_size="0";data=new Uint8Array;data_root="";reward="0";signature="";chunks;constructor(t={}){super(),Object.assign(this,t),"string"==typeof this.data&&(this.data=a.b64UrlToBuffer(this.data)),t.tags&&(this.tags=t.tags.map(t=>new o(t.name,t.value)))}addTag(t,e){this.tags.push(new o(a.stringToB64Url(t),a.stringToB64Url(e)))}toJSON(){return{format:this.format,id:this.id,last_tx:this.last_tx,owner:this.owner,tags:this.tags,target:this.target,quantity:this.quantity,data:a.bufferTob64Url(this.data),data_size:this.data_size,data_root:this.data_root,data_tree:this.data_tree,reward:this.reward,signature:this.signature}}setOwner(t){this.owner=t}setSignature({id:t,owner:e,reward:r,tags:a,signature:n}){this.id=t,this.owner=e,r&&(this.reward=r),a&&(this.tags=a),this.signature=n}async prepareChunks(t){!this.chunks&&t.byteLength>0&&(this.chunks=await (0,i.generateTransactionChunks)(t),this.data_root=a.bufferTob64Url(this.chunks.data_root)),this.chunks||0!==t.byteLength||(this.chunks={chunks:[],data_root:new Uint8Array,proofs:[]},this.data_root="")}getChunk(t,e){if(!this.chunks)throw Error("Chunks have not been prepared");let r=this.chunks.proofs[t],n=this.chunks.chunks[t];return{data_root:this.data_root,data_size:this.data_size,data_path:a.bufferTob64Url(r.proof),offset:r.offset.toString(),chunk:a.bufferTob64Url(e.slice(n.minByteRange,n.maxByteRange))}}async getSignatureData(){switch(this.format){case 1:let t=this.tags.reduce((t,e)=>a.concatBuffers([t,e.get("name",{decode:!0,string:!1}),e.get("value",{decode:!0,string:!1})]),new Uint8Array);return a.concatBuffers([this.get("owner",{decode:!0,string:!1}),this.get("target",{decode:!0,string:!1}),this.get("data",{decode:!0,string:!1}),a.stringToBuffer(this.quantity),a.stringToBuffer(this.reward),this.get("last_tx",{decode:!0,string:!1}),t]);case 2:this.data_root||await this.prepareChunks(this.data);let e=this.tags.map(t=>[t.get("name",{decode:!0,string:!1}),t.get("value",{decode:!0,string:!1})]);return await (0,n.default)([a.stringToBuffer(this.format.toString()),this.get("owner",{decode:!0,string:!1}),this.get("target",{decode:!0,string:!1}),a.stringToBuffer(this.quantity),a.stringToBuffer(this.reward),this.get("last_tx",{decode:!0,string:!1}),e,a.stringToBuffer(this.data_size),this.get("data_root",{decode:!0,string:!1})]);default:throw Error(`Unexpected transaction format: ${this.format}`)}}}e.default=u},6980:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.concatBuffers=function(t){let e=0;for(let r=0;r<t.length;r++)e+=t[r].byteLength;let r=new Uint8Array(e),a=0;r.set(new Uint8Array(t[0]),a),a+=t[0].byteLength;for(let e=1;e<t.length;e++)r.set(new Uint8Array(t[e]),a),a+=t[e].byteLength;return r},e.b64UrlToString=function(t){return n(s(t))},e.bufferToString=n,e.stringToBuffer=i,e.stringToB64Url=function(t){return u(i(t))},e.b64UrlToBuffer=s,e.bufferTob64=o,e.bufferTob64Url=u,e.b64UrlEncode=l,e.b64UrlDecode=c;let a=r(9196);function n(t){return new TextDecoder("utf-8",{fatal:!0}).decode(t)}function i(t){return new TextEncoder().encode(t)}function s(t){return new Uint8Array(a.toByteArray(c(t)))}function o(t){return a.fromByteArray(new Uint8Array(t))}function u(t){return l(o(t))}function l(t){try{return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}catch(t){throw Error("Failed to encode string",{cause:t})}}function c(t){try{let e;return e=(t=t.replace(/\-/g,"+").replace(/\_/g,"/")).length%4==0?0:4-t.length%4,t.concat("=".repeat(e))}catch(t){throw Error("Failed to decode string",{cause:t})}}},6834:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getDefaultConfig=void 0;let r=(t,e)=>{let r=/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,a=e.split("."),n=a[a.length-1],i=["localhost","[::1]"];return i.includes(e)||"file"==t||i.includes(n)||!!e.match(r)||!!n.match(r)},a=t=>{let e="["===t.charAt(0);return!!t.match(/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/)||e};e.getDefaultConfig=(t,e)=>{if(r(t,e))return{protocol:"https",host:"arweave.net",port:443};if(!a(e)){let r=e.split(".");if(r.length>=3)return r.shift(),{protocol:t,host:r.join(".")}}return{protocol:t,host:e}}},5035:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class r{api;constructor(t){this.api=t}getInfo(){return this.api.get("info").then(t=>t.data)}getPeers(){return this.api.get("peers").then(t=>t.data)}}e.default=r},3406:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SiloResource=void 0;let a=r(6980);class n{api;crypto;transactions;constructor(t,e,r){this.api=t,this.crypto=e,this.transactions=r}async get(t){if(!t)throw Error("No Silo URI specified");let e=await this.parseUri(t),r=await this.transactions.search("Silo-Name",e.getAccessKey());if(0==r.length)throw Error(`No data could be found for the Silo URI: ${t}`);let a=await this.transactions.get(r[0]);if(!a)throw Error(`No data could be found for the Silo URI: ${t}`);let n=a.get("data",{decode:!0,string:!1});return this.crypto.decrypt(n,e.getEncryptionKey())}async readTransactionData(t,e){if(!e)throw Error("No Silo URI specified");let r=await this.parseUri(e),a=t.get("data",{decode:!0,string:!1});return this.crypto.decrypt(a,r.getEncryptionKey())}async parseUri(t){let e=t.match(/^([a-z0-9-_]+)\.([0-9]+)/i);if(!e)throw Error("Invalid Silo name, must be a name in the format of [a-z0-9]+.[0-9]+, e.g. 'bubble.7'");let r=e[1],n=Math.pow(2,parseInt(e[2])),s=await this.hash(a.stringToBuffer(r),n);return new i(t,a.bufferTob64(s.slice(0,15)),await this.hash(s.slice(16,31),1))}async hash(t,e){let r=await this.crypto.hash(t);for(let t=0;t<e-1;t++)r=await this.crypto.hash(r);return r}}e.default=n;class i{uri;accessKey;encryptionKey;constructor(t,e,r){this.uri=t,this.accessKey=e,this.encryptionKey=r}getUri(){return this.uri}getAccessKey(){return this.accessKey}getEncryptionKey(){return this.encryptionKey}}e.SiloResource=i},9978:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});let a=r(3173),n=r(7651),i=r(6980),s=r(8924);r(2306);class o{api;crypto;chunks;constructor(t,e,r){this.api=t,this.crypto=e,this.chunks=r}async getTransactionAnchor(){let t=await this.api.get("tx_anchor");if(!t.data.match(/^[a-z0-9_-]{43,}/i)||!t.ok)throw Error(`Could not getTransactionAnchor. Received: ${t.data}. Status: ${t.status}, ${t.statusText}`);return t.data}async getPrice(t,e){let r=e?`price/${t}/${e}`:`price/${t}`,a=await this.api.get(r);if(!/^\d+$/.test(a.data)||!a.ok)throw Error(`Could not getPrice. Received: ${a.data}. Status: ${a.status}, ${a.statusText}`);return a.data}async get(t){let e=await this.api.get(`tx/${t}`);if(200==e.status){let r=parseInt(e.data.data_size);if(e.data.format>=2&&r>0&&r<=12582912){let r=await this.getData(t);return new n.default({...e.data,data:r})}return new n.default({...e.data,format:e.data.format||1})}if(404==e.status)throw new a.default("TX_NOT_FOUND");if(410==e.status)throw new a.default("TX_FAILED");throw new a.default("TX_INVALID")}fromRaw(t){return new n.default(t)}async search(t,e){return this.api.post("arql",{op:"equals",expr1:t,expr2:e}).then(t=>t.data?t.data:[])}getStatus(t){return this.api.get(`tx/${t}/status`).then(t=>200==t.status?{status:200,confirmed:t.data}:{status:t.status,confirmed:null})}async getData(t,e){let r;try{r=await this.chunks.downloadChunkedData(t)}catch(e){console.error(`Error while trying to download chunked data for ${t}`),console.error(e)}if(!r){console.warn(`Falling back to gateway cache for ${t}`);try{let{data:e,ok:a,status:n,statusText:i}=await this.api.get(`/${t}`,{responseType:"arraybuffer"});if(!a)throw Error("Bad http status code",{cause:{status:n,statusText:i}});r=e}catch(e){console.error(`Error while trying to download contiguous data from gateway cache for ${t}`),console.error(e)}}if(!r)throw Error(`${t} data was not found!`);return e&&e.decode&&!e.string?r:e&&e.decode&&e.string?i.bufferToString(r):i.bufferTob64Url(r)}async sign(t,e,r){let a;let n="object"==typeof e&&(a=!0,["n","e","d","p","q","dp","dq","qi"].map(t=>!(t in e)&&(a=!1)),a),s="object"==typeof arweaveWallet;if(n||s){if(n){t.setOwner(e.n);let a=await t.getSignatureData(),n=await this.crypto.sign(e,a,r),s=await this.crypto.hash(n);t.setSignature({id:i.bufferTob64Url(s),owner:e.n,signature:i.bufferTob64Url(n)})}else if(s){try{(await arweaveWallet.getPermissions()).includes("SIGN_TRANSACTION")||await arweaveWallet.connect(["SIGN_TRANSACTION"])}catch{}let e=await arweaveWallet.sign(t,r);t.setSignature({id:e.id,owner:e.owner,reward:e.reward,tags:e.tags,signature:e.signature})}else throw Error("An error occurred while signing. Check wallet is valid")}else throw Error("No valid JWK or external wallet found to sign transaction.")}async verify(t){let e=await t.getSignatureData(),r=t.get("signature",{decode:!0,string:!1}),a=i.bufferTob64Url(await this.crypto.hash(r));if(t.id!==a)throw Error("Invalid transaction signature or ID! The transaction ID doesn't match the expected SHA-256 hash of the signature.");return this.crypto.verify(t.owner,e,r)}async post(t){if("string"==typeof t?t=new n.default(JSON.parse(t)):"function"==typeof t.readInt32BE?t=new n.default(JSON.parse(t.toString())):"object"!=typeof t||t instanceof n.default||(t=new n.default(t)),!(t instanceof n.default))throw Error("Must be Transaction object");t.chunks||await t.prepareChunks(t.data);let e=await this.getUploader(t,t.data);try{for(;!e.isComplete;)await e.uploadChunk()}catch(t){if(e.lastResponseStatus>0)return{status:e.lastResponseStatus,statusText:e.lastResponseError,data:{error:e.lastResponseError}};throw t}return{status:200,statusText:"OK",data:{}}}async getUploader(t,e){let r;if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),t instanceof n.default){if(e||(e=t.data),!(e instanceof Uint8Array))throw Error("Data format is invalid");t.chunks||await t.prepareChunks(e),(r=new s.TransactionUploader(this.api,t)).data&&0!==r.data.length||(r.data=e)}else{if("string"==typeof t&&(t=await s.TransactionUploader.fromTransactionId(this.api,t)),!e||!(e instanceof Uint8Array))throw Error("Must provide data when resuming upload");r=await s.TransactionUploader.fromSerialized(this.api,t,e)}return r}async *upload(t,e){let r=await this.getUploader(t,e);for(;!r.isComplete;)await r.uploadChunk(),yield r;return r}}e.default=o},3499:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});let a=r(6980);r(2306);class n{api;crypto;constructor(t,e){this.api=t,this.crypto=e}getBalance(t){return this.api.get(`wallet/${t}/balance`).then(t=>t.data)}getLastTransactionID(t){return this.api.get(`wallet/${t}/last_tx`).then(t=>t.data)}generate(){return this.crypto.generateJWK()}async jwkToAddress(t){return t&&"use_wallet"!==t?this.getAddress(t):this.getAddress()}async getAddress(t){if(t&&"use_wallet"!==t)return this.ownerToAddress(t.n);try{await arweaveWallet.connect(["ACCESS_ADDRESS"])}catch{}return arweaveWallet.getActiveAddress()}async ownerToAddress(t){return a.bufferTob64Url(await this.crypto.hash(a.b64UrlToBuffer(t)))}}e.default=n},3587:function(t,e,r){var a;!function(n){"use strict";var i,s=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,o=Math.ceil,u=Math.floor,l="[BigNumber Error] ",c=l+"Number primitive has more than 15 significant digits: ",h=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13];function f(t){var e=0|t;return t>0||t===e?e:e-1}function d(t){for(var e,r,a=1,n=t.length,i=t[0]+"";a<n;){for(r=14-(e=t[a++]+"").length;r--;e="0"+e);i+=e}for(n=i.length;48===i.charCodeAt(--n););return i.slice(0,n+1||1)}function g(t,e){var r,a,n=t.c,i=e.c,s=t.s,o=e.s,u=t.e,l=e.e;if(!s||!o)return null;if(r=n&&!n[0],a=i&&!i[0],r||a)return r?a?0:-o:s;if(s!=o)return s;if(r=s<0,a=u==l,!n||!i)return a?0:!n^r?1:-1;if(!a)return u>l^r?1:-1;for(s=0,o=(u=n.length)<(l=i.length)?u:l;s<o;s++)if(n[s]!=i[s])return n[s]>i[s]^r?1:-1;return u==l?0:u>l^r?1:-1}function p(t,e,r,a){if(t<e||t>r||t!==u(t))throw Error(l+(a||"Argument")+("number"==typeof t?t<e||t>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function w(t){var e=t.c.length-1;return f(t.e/14)==e&&t.c[e]%2!=0}function y(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function m(t,e,r){var a,n;if(e<0){for(n=r+".";++e;n+=r);t=n+t}else if(a=t.length,++e>a){for(n=r,e-=a;--e;n+=r);t+=n}else e<a&&(t=t.slice(0,e)+"."+t.slice(e));return t}(i=function t(e){var r,a,n,i,b,v,T,E,_,A=L.prototype={constructor:L,toString:null,valueOf:null},S=new L(1),k=20,N=4,B=-7,O=21,U=-1e7,x=1e7,R=!1,C=1,P=0,I={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xa0",suffix:""},D="0123456789abcdefghijklmnopqrstuvwxyz",$=!0;function L(t,e){var r,a,n,i,o,l,h,f,d=this;if(!(d instanceof L))return new L(t,e);if(null==e){if(t&&!0===t._isBigNumber){d.s=t.s,!t.c||t.e>x?d.c=d.e=null:t.e<U?d.c=[d.e=0]:(d.e=t.e,d.c=t.c.slice());return}if((l="number"==typeof t)&&0*t==0){if(d.s=1/t<0?(t=-t,-1):1,t===~~t){for(i=0,o=t;o>=10;o/=10,i++);i>x?d.c=d.e=null:(d.e=i,d.c=[t]);return}f=String(t)}else{if(!s.test(f=String(t)))return _(d,f,l);d.s=45==f.charCodeAt(0)?(f=f.slice(1),-1):1}(i=f.indexOf("."))>-1&&(f=f.replace(".","")),(o=f.search(/e/i))>0?(i<0&&(i=o),i+=+f.slice(o+1),f=f.substring(0,o)):i<0&&(i=f.length)}else{if(p(e,2,D.length,"Base"),10==e&&$)return q(d=new L(t),k+d.e+1,N);if(f=String(t),l="number"==typeof t){if(0*t!=0)return _(d,f,l,e);if(d.s=1/t<0?(f=f.slice(1),-1):1,L.DEBUG&&f.replace(/^0\.0*|\./,"").length>15)throw Error(c+t)}else d.s=45===f.charCodeAt(0)?(f=f.slice(1),-1):1;for(r=D.slice(0,e),i=o=0,h=f.length;o<h;o++)if(0>r.indexOf(a=f.charAt(o))){if("."==a){if(o>i){i=h;continue}}else if(!n&&(f==f.toUpperCase()&&(f=f.toLowerCase())||f==f.toLowerCase()&&(f=f.toUpperCase()))){n=!0,o=-1,i=0;continue}return _(d,String(t),l,e)}l=!1,(i=(f=E(f,e,10,d.s)).indexOf("."))>-1?f=f.replace(".",""):i=f.length}for(o=0;48===f.charCodeAt(o);o++);for(h=f.length;48===f.charCodeAt(--h););if(f=f.slice(o,++h)){if(h-=o,l&&L.DEBUG&&h>15&&(t>9007199254740991||t!==u(t)))throw Error(c+d.s*t);if((i=i-o-1)>x)d.c=d.e=null;else if(i<U)d.c=[d.e=0];else{if(d.e=i,d.c=[],o=(i+1)%14,i<0&&(o+=14),o<h){for(o&&d.c.push(+f.slice(0,o)),h-=14;o<h;)d.c.push(+f.slice(o,o+=14));o=14-(f=f.slice(o)).length}else o-=h;for(;o--;f+="0");d.c.push(+f)}}else d.c=[d.e=0]}function j(t,e,r,a){var n,i,s,o,u;if(null==r?r=N:p(r,0,8),!t.c)return t.toString();if(n=t.c[0],s=t.e,null==e)u=d(t.c),u=1==a||2==a&&(s<=B||s>=O)?y(u,s):m(u,s,"0");else if(i=(t=q(new L(t),e,r)).e,o=(u=d(t.c)).length,1==a||2==a&&(e<=i||i<=B)){for(;o<e;u+="0",o++);u=y(u,i)}else if(e-=s+(2===a&&i>s),u=m(u,i,"0"),i+1>o){if(--e>0)for(u+=".";e--;u+="0");}else if((e+=i-o)>0)for(i+1==o&&(u+=".");e--;u+="0");return t.s<0&&n?"-"+u:u}function M(t,e){for(var r,a,n=1,i=new L(t[0]);n<t.length;n++)(a=new L(t[n])).s&&(r=g(i,a))!==e&&(0!==r||i.s!==e)||(i=a);return i}function K(t,e,r){for(var a=1,n=e.length;!e[--n];e.pop());for(n=e[0];n>=10;n/=10,a++);return(r=a+14*r-1)>x?t.c=t.e=null:r<U?t.c=[t.e=0]:(t.e=r,t.c=e),t}function q(t,e,r,a){var n,i,s,l,c,f,d,g=t.c;if(g){t:{for(n=1,l=g[0];l>=10;l/=10,n++);if((i=e-n)<0)i+=14,s=e,d=u((c=g[f=0])/h[n-s-1]%10);else if((f=o((i+1)/14))>=g.length){if(a){for(;g.length<=f;g.push(0));c=d=0,n=1,i%=14,s=i-14+1}else break t}else{for(n=1,c=l=g[f];l>=10;l/=10,n++);i%=14,d=(s=i-14+n)<0?0:u(c/h[n-s-1]%10)}if(a=a||e<0||null!=g[f+1]||(s<0?c:c%h[n-s-1]),a=r<4?(d||a)&&(0==r||r==(t.s<0?3:2)):d>5||5==d&&(4==r||a||6==r&&(i>0?s>0?c/h[n-s]:0:g[f-1])%10&1||r==(t.s<0?8:7)),e<1||!g[0])return g.length=0,a?(e-=t.e+1,g[0]=h[(14-e%14)%14],t.e=-e||0):g[0]=t.e=0,t;if(0==i?(g.length=f,l=1,f--):(g.length=f+1,l=h[14-i],g[f]=s>0?u(c/h[n-s]%h[s])*l:0),a)for(;;){if(0==f){for(i=1,s=g[0];s>=10;s/=10,i++);for(s=g[0]+=l,l=1;s>=10;s/=10,l++);i!=l&&(t.e++,1e14==g[0]&&(g[0]=1));break}if(g[f]+=l,1e14!=g[f])break;g[f--]=0,l=1}for(i=g.length;0===g[--i];g.pop());}t.e>x?t.c=t.e=null:t.e<U&&(t.c=[t.e=0])}return t}function H(t){var e,r=t.e;return null===r?t.toString():(e=d(t.c),e=r<=B||r>=O?y(e,r):m(e,r,"0"),t.s<0?"-"+e:e)}return L.clone=t,L.ROUND_UP=0,L.ROUND_DOWN=1,L.ROUND_CEIL=2,L.ROUND_FLOOR=3,L.ROUND_HALF_UP=4,L.ROUND_HALF_DOWN=5,L.ROUND_HALF_EVEN=6,L.ROUND_HALF_CEIL=7,L.ROUND_HALF_FLOOR=8,L.EUCLID=9,L.config=L.set=function(t){var e,r;if(null!=t){if("object"==typeof t){if(t.hasOwnProperty(e="DECIMAL_PLACES")&&(p(r=t[e],0,1e9,e),k=r),t.hasOwnProperty(e="ROUNDING_MODE")&&(p(r=t[e],0,8,e),N=r),t.hasOwnProperty(e="EXPONENTIAL_AT")&&((r=t[e])&&r.pop?(p(r[0],-1e9,0,e),p(r[1],0,1e9,e),B=r[0],O=r[1]):(p(r,-1e9,1e9,e),B=-(O=r<0?-r:r))),t.hasOwnProperty(e="RANGE")){if((r=t[e])&&r.pop)p(r[0],-1e9,-1,e),p(r[1],1,1e9,e),U=r[0],x=r[1];else if(p(r,-1e9,1e9,e),r)U=-(x=r<0?-r:r);else throw Error(l+e+" cannot be zero: "+r)}if(t.hasOwnProperty(e="CRYPTO")){if(!!(r=t[e])===r){if(r){if("undefined"!=typeof crypto&&crypto&&(crypto.getRandomValues||crypto.randomBytes))R=r;else throw R=!r,Error(l+"crypto unavailable")}else R=r}else throw Error(l+e+" not true or false: "+r)}if(t.hasOwnProperty(e="MODULO_MODE")&&(p(r=t[e],0,9,e),C=r),t.hasOwnProperty(e="POW_PRECISION")&&(p(r=t[e],0,1e9,e),P=r),t.hasOwnProperty(e="FORMAT")){if("object"==typeof(r=t[e]))I=r;else throw Error(l+e+" not an object: "+r)}if(t.hasOwnProperty(e="ALPHABET")){if("string"!=typeof(r=t[e])||/^.?$|[+\-.\s]|(.).*\1/.test(r))throw Error(l+e+" invalid: "+r);$="0123456789"==r.slice(0,10),D=r}}else throw Error(l+"Object expected: "+t)}return{DECIMAL_PLACES:k,ROUNDING_MODE:N,EXPONENTIAL_AT:[B,O],RANGE:[U,x],CRYPTO:R,MODULO_MODE:C,POW_PRECISION:P,FORMAT:I,ALPHABET:D}},L.isBigNumber=function(t){if(!t||!0!==t._isBigNumber)return!1;if(!L.DEBUG)return!0;var e,r,a=t.c,n=t.e,i=t.s;t:if("[object Array]"==({}).toString.call(a)){if((1===i||-1===i)&&n>=-1e9&&n<=1e9&&n===u(n)){if(0===a[0]){if(0===n&&1===a.length)return!0;break t}if((e=(n+1)%14)<1&&(e+=14),String(a[0]).length==e){for(e=0;e<a.length;e++)if((r=a[e])<0||r>=1e14||r!==u(r))break t;if(0!==r)return!0}}}else if(null===a&&null===n&&(null===i||1===i||-1===i))return!0;throw Error(l+"Invalid BigNumber: "+t)},L.maximum=L.max=function(){return M(arguments,-1)},L.minimum=L.min=function(){return M(arguments,1)},L.random=(r=9007199254740992*Math.random()&2097151?function(){return u(9007199254740992*Math.random())}:function(){return(1073741824*Math.random()|0)*8388608+(8388608*Math.random()|0)},function(t){var e,a,n,i,s,c=0,f=[],d=new L(S);if(null==t?t=k:p(t,0,1e9),i=o(t/14),R){if(crypto.getRandomValues){for(e=crypto.getRandomValues(new Uint32Array(i*=2));c<i;)(s=131072*e[c]+(e[c+1]>>>11))>=9e15?(a=crypto.getRandomValues(new Uint32Array(2)),e[c]=a[0],e[c+1]=a[1]):(f.push(s%1e14),c+=2);c=i/2}else if(crypto.randomBytes){for(e=crypto.randomBytes(i*=7);c<i;)(s=(31&e[c])*281474976710656+1099511627776*e[c+1]+4294967296*e[c+2]+16777216*e[c+3]+(e[c+4]<<16)+(e[c+5]<<8)+e[c+6])>=9e15?crypto.randomBytes(7).copy(e,c):(f.push(s%1e14),c+=7);c=i/7}else throw R=!1,Error(l+"crypto unavailable")}if(!R)for(;c<i;)(s=r())<9e15&&(f[c++]=s%1e14);for(i=f[--c],t%=14,i&&t&&(s=h[14-t],f[c]=u(i/s)*s);0===f[c];f.pop(),c--);if(c<0)f=[n=0];else{for(n=-1;0===f[0];f.splice(0,1),n-=14);for(c=1,s=f[0];s>=10;s/=10,c++);c<14&&(n-=14-c)}return d.e=n,d.c=f,d}),L.sum=function(){for(var t=1,e=arguments,r=new L(e[0]);t<e.length;)r=r.plus(e[t++]);return r},E=function(){var t="0123456789";function e(t,e,r,a){for(var n,i,s=[0],o=0,u=t.length;o<u;){for(i=s.length;i--;s[i]*=e);for(s[0]+=a.indexOf(t.charAt(o++)),n=0;n<s.length;n++)s[n]>r-1&&(null==s[n+1]&&(s[n+1]=0),s[n+1]+=s[n]/r|0,s[n]%=r)}return s.reverse()}return function(r,a,n,i,s){var o,u,l,c,h,f,g,p,w=r.indexOf("."),y=k,b=N;for(w>=0&&(c=P,P=0,r=r.replace(".",""),f=(p=new L(a)).pow(r.length-w),P=c,p.c=e(m(d(f.c),f.e,"0"),10,n,t),p.e=p.c.length),l=c=(g=e(r,a,n,s?(o=D,t):(o=t,D))).length;0==g[--c];g.pop());if(!g[0])return o.charAt(0);if(w<0?--l:(f.c=g,f.e=l,f.s=i,g=(f=T(f,p,y,b,n)).c,h=f.r,l=f.e),w=g[u=l+y+1],c=n/2,h=h||u<0||null!=g[u+1],h=b<4?(null!=w||h)&&(0==b||b==(f.s<0?3:2)):w>c||w==c&&(4==b||h||6==b&&1&g[u-1]||b==(f.s<0?8:7)),u<1||!g[0])r=h?m(o.charAt(1),-y,o.charAt(0)):o.charAt(0);else{if(g.length=u,h)for(--n;++g[--u]>n;)g[u]=0,u||(++l,g=[1].concat(g));for(c=g.length;!g[--c];);for(w=0,r="";w<=c;r+=o.charAt(g[w++]));r=m(r,l,o.charAt(0))}return r}}(),T=function(){function t(t,e,r){var a,n,i,s,o=0,u=t.length,l=e%1e7,c=e/1e7|0;for(t=t.slice();u--;)a=c*(i=t[u]%1e7)+(s=t[u]/1e7|0)*l,o=((n=l*i+a%1e7*1e7+o)/r|0)+(a/1e7|0)+c*s,t[u]=n%r;return o&&(t=[o].concat(t)),t}function e(t,e,r,a){var n,i;if(r!=a)i=r>a?1:-1;else for(n=i=0;n<r;n++)if(t[n]!=e[n]){i=t[n]>e[n]?1:-1;break}return i}function r(t,e,r,a){for(var n=0;r--;)t[r]-=n,n=t[r]<e[r]?1:0,t[r]=n*a+t[r]-e[r];for(;!t[0]&&t.length>1;t.splice(0,1));}return function(a,n,i,s,o){var l,c,h,d,g,p,w,y,m,b,v,T,E,_,A,S,k,N=a.s==n.s?1:-1,B=a.c,O=n.c;if(!B||!B[0]||!O||!O[0])return new L(a.s&&n.s&&(B?!O||B[0]!=O[0]:O)?B&&0==B[0]||!O?0*N:N/0:NaN);for(m=(y=new L(N)).c=[],N=i+(c=a.e-n.e)+1,o||(o=1e14,c=f(a.e/14)-f(n.e/14),N=N/14|0),h=0;O[h]==(B[h]||0);h++);if(O[h]>(B[h]||0)&&c--,N<0)m.push(1),d=!0;else{for(_=B.length,S=O.length,h=0,N+=2,(g=u(o/(O[0]+1)))>1&&(O=t(O,g,o),B=t(B,g,o),S=O.length,_=B.length),E=S,v=(b=B.slice(0,S)).length;v<S;b[v++]=0);k=[0].concat(k=O.slice()),A=O[0],O[1]>=o/2&&A++;do{if(g=0,(l=e(O,b,S,v))<0){if(T=b[0],S!=v&&(T=T*o+(b[1]||0)),(g=u(T/A))>1)for(g>=o&&(g=o-1),w=(p=t(O,g,o)).length,v=b.length;1==e(p,b,w,v);)g--,r(p,S<w?k:O,w,o),w=p.length,l=1;else 0==g&&(l=g=1),w=(p=O.slice()).length;if(w<v&&(p=[0].concat(p)),r(b,p,v,o),v=b.length,-1==l)for(;1>e(O,b,S,v);)g++,r(b,S<v?k:O,v,o),v=b.length}else 0===l&&(g++,b=[0]);m[h++]=g,b[0]?b[v++]=B[E]||0:(b=[B[E]],v=1)}while((E++<_||null!=b[0])&&N--);d=null!=b[0],m[0]||m.splice(0,1)}if(1e14==o){for(h=1,N=m[0];N>=10;N/=10,h++);q(y,i+(y.e=h+14*c-1)+1,s,d)}else y.e=c,y.r=+d;return y}}(),a=/^(-?)0([xbo])(?=\w[\w.]*$)/i,n=/^([^.]+)\.$/,i=/^\.([^.]+)$/,b=/^-?(Infinity|NaN)$/,v=/^\s*\+(?=[\w.])|^\s+|\s+$/g,_=function(t,e,r,s){var o,u=r?e:e.replace(v,"");if(b.test(u))t.s=isNaN(u)?null:u<0?-1:1;else{if(!r&&(u=u.replace(a,function(t,e,r){return o="x"==(r=r.toLowerCase())?16:"b"==r?2:8,s&&s!=o?t:e}),s&&(o=s,u=u.replace(n,"$1").replace(i,"0.$1")),e!=u))return new L(u,o);if(L.DEBUG)throw Error(l+"Not a"+(s?" base "+s:"")+" number: "+e);t.s=null}t.c=t.e=null},A.absoluteValue=A.abs=function(){var t=new L(this);return t.s<0&&(t.s=1),t},A.comparedTo=function(t,e){return g(this,new L(t,e))},A.decimalPlaces=A.dp=function(t,e){var r,a,n;if(null!=t)return p(t,0,1e9),null==e?e=N:p(e,0,8),q(new L(this),t+this.e+1,e);if(!(r=this.c))return null;if(a=((n=r.length-1)-f(this.e/14))*14,n=r[n])for(;n%10==0;n/=10,a--);return a<0&&(a=0),a},A.dividedBy=A.div=function(t,e){return T(this,new L(t,e),k,N)},A.dividedToIntegerBy=A.idiv=function(t,e){return T(this,new L(t,e),0,1)},A.exponentiatedBy=A.pow=function(t,e){var r,a,n,i,s,c,h,f,d,g=this;if((t=new L(t)).c&&!t.isInteger())throw Error(l+"Exponent not an integer: "+H(t));if(null!=e&&(e=new L(e)),c=t.e>14,!g.c||!g.c[0]||1==g.c[0]&&!g.e&&1==g.c.length||!t.c||!t.c[0])return d=new L(Math.pow(+H(g),c?t.s*(2-w(t)):+H(t))),e?d.mod(e):d;if(h=t.s<0,e){if(e.c?!e.c[0]:!e.s)return new L(NaN);(a=!h&&g.isInteger()&&e.isInteger())&&(g=g.mod(e))}else{if(t.e>9&&(g.e>0||g.e<-1||(0==g.e?g.c[0]>1||c&&g.c[1]>=24e7:g.c[0]<8e13||c&&g.c[0]<=9999975e7)))return i=g.s<0&&w(t)?-0:0,g.e>-1&&(i=1/i),new L(h?1/i:i);P&&(i=o(P/14+2))}for(c?(r=new L(.5),h&&(t.s=1),f=w(t)):f=(n=Math.abs(+H(t)))%2,d=new L(S);;){if(f){if(!(d=d.times(g)).c)break;i?d.c.length>i&&(d.c.length=i):a&&(d=d.mod(e))}if(n){if(0===(n=u(n/2)))break;f=n%2}else if(q(t=t.times(r),t.e+1,1),t.e>14)f=w(t);else{if(0==(n=+H(t)))break;f=n%2}g=g.times(g),i?g.c&&g.c.length>i&&(g.c.length=i):a&&(g=g.mod(e))}return a?d:(h&&(d=S.div(d)),e?d.mod(e):i?q(d,P,N,s):d)},A.integerValue=function(t){var e=new L(this);return null==t?t=N:p(t,0,8),q(e,e.e+1,t)},A.isEqualTo=A.eq=function(t,e){return 0===g(this,new L(t,e))},A.isFinite=function(){return!!this.c},A.isGreaterThan=A.gt=function(t,e){return g(this,new L(t,e))>0},A.isGreaterThanOrEqualTo=A.gte=function(t,e){return 1===(e=g(this,new L(t,e)))||0===e},A.isInteger=function(){return!!this.c&&f(this.e/14)>this.c.length-2},A.isLessThan=A.lt=function(t,e){return 0>g(this,new L(t,e))},A.isLessThanOrEqualTo=A.lte=function(t,e){return -1===(e=g(this,new L(t,e)))||0===e},A.isNaN=function(){return!this.s},A.isNegative=function(){return this.s<0},A.isPositive=function(){return this.s>0},A.isZero=function(){return!!this.c&&0==this.c[0]},A.minus=function(t,e){var r,a,n,i,s=this.s;if(e=(t=new L(t,e)).s,!s||!e)return new L(NaN);if(s!=e)return t.s=-e,this.plus(t);var o=this.e/14,u=t.e/14,l=this.c,c=t.c;if(!o||!u){if(!l||!c)return l?(t.s=-e,t):new L(c?this:NaN);if(!l[0]||!c[0])return c[0]?(t.s=-e,t):new L(l[0]?this:3==N?-0:0)}if(o=f(o),u=f(u),l=l.slice(),s=o-u){for((i=s<0)?(s=-s,n=l):(u=o,n=c),n.reverse(),e=s;e--;n.push(0));n.reverse()}else for(a=(i=(s=l.length)<(e=c.length))?s:e,s=e=0;e<a;e++)if(l[e]!=c[e]){i=l[e]<c[e];break}if(i&&(n=l,l=c,c=n,t.s=-t.s),(e=(a=c.length)-(r=l.length))>0)for(;e--;l[r++]=0);for(e=1e14-1;a>s;){if(l[--a]<c[a]){for(r=a;r&&!l[--r];l[r]=e);--l[r],l[a]+=1e14}l[a]-=c[a]}for(;0==l[0];l.splice(0,1),--u);return l[0]?K(t,l,u):(t.s=3==N?-1:1,t.c=[t.e=0],t)},A.modulo=A.mod=function(t,e){var r,a;return(t=new L(t,e),this.c&&t.s&&(!t.c||t.c[0]))?t.c&&(!this.c||this.c[0])?(9==C?(a=t.s,t.s=1,r=T(this,t,0,3),t.s=a,r.s*=a):r=T(this,t,0,C),(t=this.minus(r.times(t))).c[0]||1!=C||(t.s=this.s),t):new L(this):new L(NaN)},A.multipliedBy=A.times=function(t,e){var r,a,n,i,s,o,u,l,c,h,d,g,p,w=this.c,y=(t=new L(t,e)).c;if(!w||!y||!w[0]||!y[0])return this.s&&t.s&&(!w||w[0]||y)&&(!y||y[0]||w)?(t.s*=this.s,w&&y?(t.c=[0],t.e=0):t.c=t.e=null):t.c=t.e=t.s=null,t;for(a=f(this.e/14)+f(t.e/14),t.s*=this.s,(u=w.length)<(h=y.length)&&(p=w,w=y,y=p,n=u,u=h,h=n),n=u+h,p=[];n--;p.push(0));for(n=h;--n>=0;){for(r=0,d=y[n]%1e7,g=y[n]/1e7|0,i=n+(s=u);i>n;)o=g*(l=w[--s]%1e7)+(c=w[s]/1e7|0)*d,r=((l=d*l+o%1e7*1e7+p[i]+r)/1e14|0)+(o/1e7|0)+g*c,p[i--]=l%1e14;p[i]=r}return r?++a:p.splice(0,1),K(t,p,a)},A.negated=function(){var t=new L(this);return t.s=-t.s||null,t},A.plus=function(t,e){var r,a=this.s;if(e=(t=new L(t,e)).s,!a||!e)return new L(NaN);if(a!=e)return t.s=-e,this.minus(t);var n=this.e/14,i=t.e/14,s=this.c,o=t.c;if(!n||!i){if(!s||!o)return new L(a/0);if(!s[0]||!o[0])return o[0]?t:new L(s[0]?this:0*a)}if(n=f(n),i=f(i),s=s.slice(),a=n-i){for(a>0?(i=n,r=o):(a=-a,r=s),r.reverse();a--;r.push(0));r.reverse()}for((a=s.length)-(e=o.length)<0&&(r=o,o=s,s=r,e=a),a=0;e;)a=(s[--e]=s[e]+o[e]+a)/1e14|0,s[e]=1e14===s[e]?0:s[e]%1e14;return a&&(s=[a].concat(s),++i),K(t,s,i)},A.precision=A.sd=function(t,e){var r,a,n;if(null!=t&&!!t!==t)return p(t,1,1e9),null==e?e=N:p(e,0,8),q(new L(this),t,e);if(!(r=this.c))return null;if(a=14*(n=r.length-1)+1,n=r[n]){for(;n%10==0;n/=10,a--);for(n=r[0];n>=10;n/=10,a++);}return t&&this.e+1>a&&(a=this.e+1),a},A.shiftedBy=function(t){return p(t,-9007199254740991,9007199254740991),this.times("1e"+t)},A.squareRoot=A.sqrt=function(){var t,e,r,a,n,i=this.c,s=this.s,o=this.e,u=k+4,l=new L("0.5");if(1!==s||!i||!i[0])return new L(!s||s<0&&(!i||i[0])?NaN:i?this:1/0);if(0==(s=Math.sqrt(+H(this)))||s==1/0?(((e=d(i)).length+o)%2==0&&(e+="0"),s=Math.sqrt(+e),o=f((o+1)/2)-(o<0||o%2),r=new L(e=s==1/0?"5e"+o:(e=s.toExponential()).slice(0,e.indexOf("e")+1)+o)):r=new L(s+""),r.c[0]){for((s=(o=r.e)+u)<3&&(s=0);;)if(n=r,r=l.times(n.plus(T(this,n,u,1))),d(n.c).slice(0,s)===(e=d(r.c)).slice(0,s)){if(r.e<o&&--s,"9999"!=(e=e.slice(s-3,s+1))&&(a||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(q(r,r.e+k+2,1),t=!r.times(r).eq(this));break}if(!a&&(q(n,n.e+k+2,0),n.times(n).eq(this))){r=n;break}u+=4,s+=4,a=1}}return q(r,r.e+k+1,N,t)},A.toExponential=function(t,e){return null!=t&&(p(t,0,1e9),t++),j(this,t,e,1)},A.toFixed=function(t,e){return null!=t&&(p(t,0,1e9),t=t+this.e+1),j(this,t,e)},A.toFormat=function(t,e,r){var a;if(null==r)null!=t&&e&&"object"==typeof e?(r=e,e=null):t&&"object"==typeof t?(r=t,t=e=null):r=I;else if("object"!=typeof r)throw Error(l+"Argument not an object: "+r);if(a=this.toFixed(t,e),this.c){var n,i=a.split("."),s=+r.groupSize,o=+r.secondaryGroupSize,u=r.groupSeparator||"",c=i[0],h=i[1],f=this.s<0,d=f?c.slice(1):c,g=d.length;if(o&&(n=s,s=o,o=n,g-=n),s>0&&g>0){for(n=g%s||s,c=d.substr(0,n);n<g;n+=s)c+=u+d.substr(n,s);o>0&&(c+=u+d.slice(n)),f&&(c="-"+c)}a=h?c+(r.decimalSeparator||"")+((o=+r.fractionGroupSize)?h.replace(RegExp("\\d{"+o+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):h):c}return(r.prefix||"")+a+(r.suffix||"")},A.toFraction=function(t){var e,r,a,n,i,s,o,u,c,f,g,p,w=this.c;if(null!=t&&(!(o=new L(t)).isInteger()&&(o.c||1!==o.s)||o.lt(S)))throw Error(l+"Argument "+(o.isInteger()?"out of range: ":"not an integer: ")+H(o));if(!w)return new L(this);for(e=new L(S),c=r=new L(S),a=u=new L(S),p=d(w),i=e.e=p.length-this.e-1,e.c[0]=h[(s=i%14)<0?14+s:s],t=!t||o.comparedTo(e)>0?i>0?e:c:o,s=x,x=1/0,o=new L(p),u.c[0]=0;f=T(o,e,0,1),1!=(n=r.plus(f.times(a))).comparedTo(t);)r=a,a=n,c=u.plus(f.times(n=c)),u=n,e=o.minus(f.times(n=e)),o=n;return n=T(t.minus(r),a,0,1),u=u.plus(n.times(c)),r=r.plus(n.times(a)),u.s=c.s=this.s,i*=2,g=1>T(c,a,i,N).minus(this).abs().comparedTo(T(u,r,i,N).minus(this).abs())?[c,a]:[u,r],x=s,g},A.toNumber=function(){return+H(this)},A.toPrecision=function(t,e){return null!=t&&p(t,1,1e9),j(this,t,e,2)},A.toString=function(t){var e,r=this,a=r.s,n=r.e;return null===n?a?(e="Infinity",a<0&&(e="-"+e)):e="NaN":(null==t?e=n<=B||n>=O?y(d(r.c),n):m(d(r.c),n,"0"):10===t&&$?e=m(d((r=q(new L(r),k+n+1,N)).c),r.e,"0"):(p(t,2,D.length,"Base"),e=E(m(d(r.c),n,"0"),10,t,a,!0)),a<0&&r.c[0]&&(e="-"+e)),e},A.valueOf=A.toJSON=function(){return H(this)},A._isBigNumber=!0,null!=e&&L.set(e),L}()).default=i.BigNumber=i,void 0!==(a=(function(){return i}).call(e,r,e,t))&&(t.exports=a)}(0)}}]);